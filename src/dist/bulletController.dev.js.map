{"version":3,"sources":["bulletController.js"],"names":["BulletController","bullets","timerTillNextBullet","shoot","bind","x","y","speed","damage","delay","bulletNew","Bullet","push","bullet","width","height","sprite","some","index","collideWith","currentScore","parseInt","localStorage","getItem","setItem","console","log","splice","deltaTime","forEach","update","context","isBulletOffScreen","draw"],"mappings":";;;;;;;AAAA;;;;;;;;;;IAEqBA,gB;;;AACnB,8BAAc;AAAA;;AACZ,SAAKC,OAAL,GAAe,EAAf;AACA,SAAKC,mBAAL,GAA2B,CAA3B;AACA,SAAKC,KAAL,GAAa,KAAKA,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAAb;AACD;;;;0BAEKC,C,EAAGC,C,EAAGC,K,EAAOC,M,EAAQC,K,EAAO;AAChC,UAAI,KAAKP,mBAAL,IAA4B,CAAhC,EAAmC;AACjC,YAAMQ,SAAS,GAAG,IAAIC,kBAAJ,CAAWN,CAAX,EAAcC,CAAd,EAAiBC,KAAjB,EAAwBC,MAAxB,CAAlB;AACA,aAAKP,OAAL,CAAaW,IAAb,CAAkBF,SAAlB;AACA,aAAKR,mBAAL,GAA2BO,KAA3B;AACD;;AACD,WAAKP,mBAAL;AACD;;;sCAEiBW,M,EAAQ;AACxB,aACEA,MAAM,CAACR,CAAP,IAAY,CAACQ,MAAM,CAACC,KAApB,IACAD,MAAM,CAACR,CAAP,GAAW,GADX,IAEAQ,MAAM,CAACP,CAAP,GAAW,GAFX,IAGAO,MAAM,CAACP,CAAP,IAAY,CAACO,MAAM,CAACE,MAJtB;AAMD;;;gCAEWC,M,EAAO;AAAA;;AAClB,aAAO,KAAKf,OAAL,CAAagB,IAAb,CAAkB,UAACJ,MAAD,EAASK,KAAT,EAAmB;AAC1C,YAAIL,MAAM,CAACM,WAAP,CAAmBH,MAAnB,CAAJ,EAAgC;AAC9B,cAAII,YAAY,GAAGC,QAAQ,CAACC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAD,CAA3B;AACAD,UAAAA,YAAY,CAACE,OAAb,CAAqB,cAArB,EAAqC,EAAEJ,YAAvC;AACAK,UAAAA,OAAO,CAACC,GAAR,CAAYJ,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAZ;;AACA,UAAA,KAAI,CAACtB,OAAL,CAAa0B,MAAb,CAAoBT,KAApB,EAA2B,CAA3B;;AACA,iBAAO,IAAP;AACD;;AACD,eAAO,KAAP;AACD,OATM,CAAP;AAUA;;;2BACMU,S,EAAW;AAChB,WAAK3B,OAAL,CAAa4B,OAAb,CAAqB,UAAChB,MAAD,EAAY;AAC/BA,QAAAA,MAAM,CAACiB,MAAP;AACD,OAFD;AAGD;;;yBAEIC,O,EAAS;AAAA;;AACZ;AACA,WAAK9B,OAAL,CAAa4B,OAAb,CAAqB,UAAChB,MAAD,EAASK,KAAT,EAAmB;AACtC,YAAI,MAAI,CAACc,iBAAL,CAAuBnB,MAAvB,CAAJ,EAAoC;AAClC,UAAA,MAAI,CAACZ,OAAL,CAAa0B,MAAb,CAAoBT,KAApB,EAA2B,CAA3B;;AACA;AACD;;AACDL,QAAAA,MAAM,CAACoB,IAAP,CAAYF,OAAZ;AACD,OAND;AAOD","sourcesContent":["import Bullet from \"./bullet.js\";\r\n\r\nexport default class BulletController {\r\n  constructor() {\r\n    this.bullets = [];\r\n    this.timerTillNextBullet = 0;\r\n    this.shoot = this.shoot.bind(this);\r\n  }\r\n\r\n  shoot(x, y, speed, damage, delay) {\r\n    if (this.timerTillNextBullet <= 0) {\r\n      const bulletNew = new Bullet(x, y, speed, damage);\r\n      this.bullets.push(bulletNew);\r\n      this.timerTillNextBullet = delay;\r\n    }\r\n    this.timerTillNextBullet--;\r\n  }\r\n\r\n  isBulletOffScreen(bullet) {\r\n    return (\r\n      bullet.x <= -bullet.width ||\r\n      bullet.x > 800 ||\r\n      bullet.y > 800 ||\r\n      bullet.y <= -bullet.height\r\n    );\r\n  }\r\n\r\n  collideWith(sprite){  \r\n   return this.bullets.some((bullet, index) => {\r\n     if (bullet.collideWith(sprite)) {\r\n       let currentScore = parseInt(localStorage.getItem(\"currentScore\"));\r\n       localStorage.setItem(\"currentScore\", ++currentScore);\r\n       console.log(localStorage.getItem(\"currentScore\"));\r\n       this.bullets.splice(index, 1);\r\n       return true;\r\n     }\r\n     return false;\r\n   });\r\n  }\r\n  update(deltaTime) {\r\n    this.bullets.forEach((bullet) => {\r\n      bullet.update();\r\n    });\r\n  }\r\n\r\n  draw(context) {\r\n    // console.log(this.bullets.length);\r\n    this.bullets.forEach((bullet, index) => {\r\n      if (this.isBulletOffScreen(bullet)) {\r\n        this.bullets.splice(index, 1);\r\n        return;\r\n      }\r\n      bullet.draw(context);\r\n    });\r\n  }\r\n}\r\n"],"file":"bulletController.dev.js"}