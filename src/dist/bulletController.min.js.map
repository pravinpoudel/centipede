{"version":3,"sources":["bulletController.js"],"names":["_bullet","_interopRequireDefault","require","BulletController","_classCallCheck","this","bullets","timerTillNextBullet","shoot","bind","x","y","speed","damage","delay","bulletNew","Bullet","push","bullet","width","height","sprite","_this","some","index","collideWith","currentScore","localStorage","console","splice","forEach","update","context","_this2","isBulletOffScreen"],"mappings":"2FAAA,IAAAA,QAAAC,uBAAAC,QAAA,keAEqBC,4BACnB,SAAAA,IAAcC,gBAAAC,KAAAF,GACZE,KAAKC,QAAU,GACfD,KAAKE,oBAAsB,EAC3BF,KAAKG,MAAQH,KAAKG,MAAMC,KAAKJ,yDAGzBK,EAAGC,EAAGC,EAAOC,EAAQC,GACzB,GAAIT,KAAKE,qBAAuB,EAAG,CACjC,IAAMQ,EAAY,IAAIC,QAAAA,QAAON,EAAGC,EAAGC,EAAOC,GAC1CR,KAAKC,QAAQW,KAAKF,GAClBV,KAAKE,oBAAsBO,EAE7BT,KAAKE,gEAGWW,GAChB,OAhBFA,EAAAR,IAAAQ,EAAAC,OAAc,IAAAD,EAAAR,GAmBC,IAAXQ,EAAOP,GAlBTO,EAAKZ,IAAUY,EAAfE,2CAuBUC,GAAO,IAAAC,EAAAjB,KAClB,OAAOA,KAAKC,QAAQiB,KAAK,SAACL,EAAQM,GAChC,GAAIN,EAAOO,YAAYJ,GAAS,CAC9B,IAAIK,EArBHhB,SAAME,aAAeE,QAAO,iBAI9B,OAHFa,aAASpB,QAAAA,iBAA0BmB,GACjCE,QAAMb,IAAAA,aAAgBC,QAAAA,iBACtBM,EAAAhB,QAAAuB,OAAkBd,EAAAA,IACbR,EAuBN,OAAO,qCAIRF,KAAKC,QAAQwB,QAAQ,SAACZ,GACpBA,EAAOa,wCAINC,GAAS,IAAAC,EAAA5B,KAlBKA,KAAAC,QAAAwB,QAAA,SAAAZ,EAAAM,GAqBXS,EAAKC,kBAAkBhB,GApB9Be,EAAO3B,QAAKA,OAAQiB,EAAK,GAGrBI,EAAAA,KAAAA","file":"bulletController.min.js","sourcesContent":["import Bullet from \"./bullet.js\";\r\n\r\nexport default class BulletController {\r\n  constructor() {\r\n    this.bullets = [];\r\n    this.timerTillNextBullet = 0;\r\n    this.shoot = this.shoot.bind(this);\r\n  }\r\n\r\n  shoot(x, y, speed, damage, delay) {\r\n    if (this.timerTillNextBullet <= 0) {\r\n      const bulletNew = new Bullet(x, y, speed, damage);\r\n      this.bullets.push(bulletNew);\r\n      this.timerTillNextBullet = delay;\r\n    }\r\n    this.timerTillNextBullet--;\r\n  }\r\n\r\n  isBulletOffScreen(bullet) {\r\n    return (\r\n      bullet.x <= -bullet.width ||\r\n      bullet.x > 800 ||\r\n      bullet.y > 800 ||\r\n      bullet.y <= -bullet.height\r\n    );\r\n  }\r\n\r\n  collideWith(sprite){  \r\n   return this.bullets.some((bullet, index) => {\r\n     if (bullet.collideWith(sprite)) {\r\n       let currentScore = parseInt(localStorage.getItem(\"currentScore\"));\r\n       localStorage.setItem(\"currentScore\", ++currentScore);\r\n       console.log(localStorage.getItem(\"currentScore\"));\r\n       this.bullets.splice(index, 1);\r\n       return true;\r\n     }\r\n     return false;\r\n   });\r\n  }\r\n  update(deltaTime) {\r\n    this.bullets.forEach((bullet) => {\r\n      bullet.update();\r\n    });\r\n  }\r\n\r\n  draw(context) {\r\n    // console.log(this.bullets.length);\r\n    this.bullets.forEach((bullet, index) => {\r\n      if (this.isBulletOffScreen(bullet)) {\r\n        this.bullets.splice(index, 1);\r\n        return;\r\n      }\r\n      bullet.draw(context);\r\n    });\r\n  }\r\n}\r\n"]}